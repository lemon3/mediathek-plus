// ==UserScript==
// @name         mediathek plus
// @namespace    https://github.com/lemon3/
// @version      0.8.0
// @description  mediathek plus is a userscript extension
// @author       lemon3
// @match        https://on.orf.at/*
// @icon         https://raw.githubusercontent.com/lemon3/mediathek-plus/main/_assets/dl.svg
// @grant        none
// @run-at       document-end
// @license      MIT
// @copyright    lemon3
// @homepage     https://github.com/lemon3/mediathek-plus
// @updateURL    https://raw.githubusercontent.com/lemon3/mediathek-plus/main/dist/mediathek-plus.meta.js
// @downloadURL  https://raw.githubusercontent.com/lemon3/mediathek-plus/main/dist/mediathek-plus.user.js
// ==/UserScript==

var ie=Object.defineProperty;var _=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var A=(d,l,r)=>l in d?ie(d,l,{enumerable:!0,configurable:!0,writable:!0,value:r}):d[l]=r,z=(d,l)=>{for(var r in l||(l={}))se.call(l,r)&&A(d,r,l[r]);if(_)for(var r of _(l))ne.call(l,r)&&A(d,r,l[r]);return d};var c=(d,l,r)=>(A(d,typeof l!="symbol"?l+"":l,r),r);var D=(d,l,r)=>new Promise((o,w)=>{var y=g=>{try{b(r.next(g))}catch(T){w(T)}},k=g=>{try{b(r.throw(g))}catch(T){w(T)}},b=g=>g.done?o(g.value):Promise.resolve(g.value).then(y,k);b((r=r.apply(d,l)).next())});(function(){"use strict";const d="body.dragging>*{-webkit-touch-callout:none;-webkit-user-select:none;user-select:none}#l3-2727{--color-1: #000;--color-2: #222;--color-3: #72bbe9;--color-4: #c9c9c9;--color-5: #222222;--color-6: #555555;--color-7: #aedaf5;--font-small: 12px;--font-tiny: 10px}#l3-2727{position:fixed;top:0;left:0;z-index:99999;font-family:Arial,Helvetica Neue,Helvetica,sans-serif;color:var(--color-4)}.l3-2727-info{font-size:var(--font-small)}#l3-2727-body .l3-2727-info{padding:15px}#l3-2727-clear{color:var(--color-1);background-color:var(--color-3);width:32px;height:38px;box-sizing:border-box;flex:none;text-align:center;justify-content:center;padding:.5em;cursor:pointer}#l3-2727-header{width:100%;padding:15px}#l3-2727-header.hidden{display:none}.l3-2727-buttons{display:flex;font-size:14px;gap:.5em}.l3-2727-button{font-size:var(--font-small);color:var(--color-4);background-color:var(--color-5);cursor:pointer;display:flex;flex:1 1 auto;justify-content:center;text-align:center;width:50%;padding:.5em;border-radius:6px}.l3-2727-button.active{color:var(--color-2);background-color:var(--color-3)}.l3-2727-button.active:hover{background-color:var(--color-7)}#l3-2727-filter{display:flex;align-items:stretch;margin-top:.5em}#l3-2727-filter.hidden{display:none}#l3-2727-content{max-height:260px;overflow:scroll}#l3-2727-close{z-index:999999;position:absolute;top:19px;left:15px;padding:0;background-image:url(data:image/svg+xml;base64,PHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNTYgMjU2IiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjZmZmIj48cGF0aCBkPSJtMTI4IDIzNS4zYy01OS4yIDAtMTA3LjMtNDguMi0xMDcuMy0xMDcuMy0wLTU5LjIgNDguMS0xMDcuMyAxMDcuMy0xMDcuM3MxMDcuMyA0OC4yIDEwNy4zIDEwNy4zYzAgNTkuMi00OC4xIDEwNy4zLTEwNy4zIDEwNy4zem0wLTIwMi42Yy01Mi42IDAtOTUuMyA0Mi44LTk1LjMgOTUuM3M0Mi44IDk1LjMgOTUuMyA5NS4zIDk1LjMtNDIuOCA5NS4zLTk1LjMtNDIuNy05NS4zLTk1LjMtOTUuM3oiLz48ZWxsaXBzZSBjeD0iOTYuMiIgY3k9Ijk2LjEiIHJ4PSIxOC4zIiByeT0iMjciLz48ZWxsaXBzZSBjeD0iMTU5LjgiIGN5PSI5Ni4xIiByeD0iMTguMyIgcnk9IjI3Ii8+PHBhdGggZD0ibTEyOC41IDE4OC44Yy0zOC42IDAtNTUuMi0yOC45LTU1LjktMzAuMi0xLjYtMi45LS42LTYuNSAyLjMtOC4yIDIuOS0xLjYgNi41LS42IDguMiAyLjMuNiAxIDE0LjEgMjQuMSA0NS40IDI0LjEgMzEuMiAwIDQzLjgtMjIuOSA0NC4zLTIzLjkgMS42LTIuOSA1LjItNCA4LjEtMi41czQuMSA1LjEgMi41IDguMWMtLjYgMS4yLTE2LjIgMzAuMy01NC45IDMwLjN6Ii8+PC9nPjwvc3ZnPg==);background-repeat:no-repeat;width:38px;height:38px;background-size:26px;background-color:var(--color-1);border-radius:50%;background-position:center center;box-shadow:0 2px 12px -3px #fffc;cursor:pointer;user-select:none}#l3-2727-close.open{background-size:20px;background-image:url(data:image/svg+xml;base64,PHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNTYgMjU2IiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtMjQ2LjUgMjM0LjctMTA2LjctMTA2LjcgMTA2LjctMTA2LjctMTEuOC0xMS45LTEwNi43IDEwNi43LTEwNi43LTEwNi42LTExLjggMTEuOSAxMDYuNiAxMDYuNi0xMDYuNiAxMDYuNiAxMS44IDExLjkgMTA2LjctMTA2LjYgMTA2LjcgMTA2Ljd6IiBmaWxsPSIjZmZmIi8+PC9zdmc+)}#l3-2727-field{font-size:16px;touch-action:none;padding:8px;height:38px;border:0;border-radius:0;color:var(--color-2);width:100%}#l3-2727-field:focus{outline:none}#l3-2727-box{z-index:999999;box-sizing:border-box;margin:0;top:64px;max-width:280px;width:280px;background-color:var(--color-1);transform:translate(-100%);position:relative;transition:transform .1s ease-out;border:1px solid var(--color-5);box-shadow:0 2px 12px -3px #fffc;border-radius:6px}#l3-2727-box.open{transform:translate(0);transition:transform .2s ease-out}.l3-2727-actions{display:flex;flex-direction:column;gap:.5em}.l3-2727-action{width:36px;height:36px;background-color:var(--color-3);display:flex;background-size:70%;background-repeat:no-repeat;background-position:center center;flex:none;border:none;border-radius:6px}.l3-2727-newTab{background-image:url(data:image/svg+xml;base64,PHN2ZyBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyNTYgMjU2IiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSIjMWQxZDFiIj48cGF0aCBkPSJtMjMzLjYgMjYuNGgtMTY3LjJjLTQuMSAwLTcuNSAzLjQtNy41IDcuNXYzOC4zaC0zNi41Yy00LjEgMC03LjUgMy40LTcuNSA3LjV2MTQwLjVjMCA0LjEgMy40IDcuNSA3LjUgNy41aDE2Ny4yYzQuMSAwIDcuNS0zLjQgNy41LTcuNXYtMzguMmgzNi42YzQuMSAwIDcuNS0zLjQgNy41LTcuNXYtMTQwLjZjLS4xLTQuMS0zLjQtNy41LTcuNi03LjV6bS01MS41IDE4Ni40aC0xNTIuMnYtMTI1LjVoMjkuMXY4Ny4yYzAgNC4xIDMuNCA3LjUgNy41IDcuNWgxMTUuN3YzMC44em00NC00NS44aC0yOS4xLTE1LTEwOC4xdi03OS43LTE1LTMwLjloMTUyLjJ6Ii8+PHBhdGggZD0ibTE5NS4yIDk2LjdoLTM3Ljd2LTM0YzAtNC4xLTMuNC03LjUtNy41LTcuNXMtNy41IDMuNC03LjUgNy41djM0aC0zNy43Yy00LjEgMC03LjUgMy40LTcuNSA3LjVzMy40IDcuNSA3LjUgNy41aDM3Ljd2MzRjMCA0LjEgMy40IDcuNSA3LjUgNy41czcuNS0zLjQgNy41LTcuNXYtMzRoMzcuN2M0LjEgMCA3LjUtMy40IDcuNS03LjVzLTMuMy03LjUtNy41LTcuNXoiLz48L2c+PC9zdmc+)}.l3-2727-shareBtn{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCI+PHBhdGggZD0iTTE1Ljk4NCA1LjAxNmwtMS40MDYgMS40MDYtMS41OTQtMS41OTR2MTEuMTU2aC0xLjk2OVY0LjgyOEw5LjQyMSA2LjQyMiA4LjAxNSA1LjAxNiAxMS45OTkuOTg1em00LjAzMiA0Ljk2OFYyMXEwIC44NDQtLjU4NiAxLjQzdC0xLjQzLjU4Nkg2cS0uODQ0IDAtMS40My0uNTg2VDMuOTg0IDIxVjkuOTg0cTAtLjc5Ny41ODYtMS4zODNUNiA4LjAxNWgzdjEuOTY5SDZWMjFoMTJWOS45ODRoLTNWOC4wMTVoM3EuODQ0IDAgMS40My41ODZ0LjU4NiAxLjM4M3oiLz48L3N2Zz4=)}.l3-2727-action:hover{background-color:var(--color-7);cursor:pointer}.l3-2727-result{padding:1em}.l3-2727-result:nth-child(odd){background-color:var(--color-5)}.l3-2727-main{display:flex;flex-flow:row nowrap;gap:.5em}.l3-2727-bar{font-size:var(--font-small);display:flex;justify-content:space-between;align-items:center;margin-bottom:.5em}.l3-2727-title{font-size:var(--font-small);display:flex;width:100%;flex:1 0 100%;padding:.5em .5em .5em 0;line-height:1.4em}.l3-2727-imgWrap{display:flex;flex:1 1 auto;position:relative;cursor:pointer}.l3-2727-imgWrap img{max-width:100%}.l3-2727-copy{font-size:25px;position:absolute;text-align:center;width:100%;background-color:#0006;padding:6px;transition:opacity ease-out .2s;display:flex;justify-content:center;align-self:center}#l3-2727 .success .l3-2727-copy{opacity:1}.l3-2727-imgWrap.active{box-shadow:0 0 0 2px #ffff54;filter:brightness(1.2)}#l3-2727-footer{font-size:var(--font-tiny);text-align:right;padding:.5em}",l=(a,e,t)=>{if(a=parseFloat(a,10),e=parseFloat(e,10),t=parseFloat(t,10),t<e){let s=t;t=e,e=s}return!isNaN(e)&&a<e?e:!isNaN(t)&&a>t?t:a},r=(a,e,t)=>{if(e)for(let s in e)Object.prototype.hasOwnProperty.call(e,s)&&a.setAttribute(s,e[s]);if(t)for(let s in t)Object.prototype.hasOwnProperty.call(t,s)&&(a.style[s]=t[s]);return a},o=(a,e,t)=>r(document.createElement(a),e,t);class w{constructor(){}get(e,t){let s=localStorage.getItem(e);if(!s)return!1;let n=JSON.parse(s);return t?n[t]:n}set(e,t){const s=this.get(e)||{},n=z(z({},s),t);let i=JSON.stringify(n);localStorage.setItem(e,i)}}let y=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return y={passive:!1},!1}}))}catch(a){y=!1}const H={name:"mediathek-plus",displayName:"mediathek plus",version:"0.8.0",type:"module",description:"mediathek plus is a userscript extension",main:"index.js",author:"lemon3",license:"MIT",scripts:{dev:"vite",build:"vite build",preview:"vite preview",lint:"eslint 'src/**/*.js' || true",prettify:"prettier --write 'src/**/*.*'",browserslistupdate:"npx update-browserslist-db@latest"},devDependencies:{eslint:"^9.3.0",prettier:"^3.2.5",vite:"^5.2.11","vite-plugin-banner":"^0.7.1","vite-plugin-create-file":"^0.1.0","vite-plugin-string-replace":"^1.1.2"},dependencies:{globals:"^15.3.0"}},M={btn:"Auf das Bild klicken um den video-link in die Zwischenablage zu kopieren",nothingFound:"Auf dieser Seite gibt es kein Video!",filterVideos:"Beiträge filtern ...",shareVideo:"Video Link teilen",openTab:"Video Link in neuem Tab öffnen",completeBroadcast:"Ganze Sendung anzeigen",individualPosts:"Einzelne Beiträge anzeigen"},Z=H.version;let F="Q8C",V="hls";const Q=d.toString();let f;const E=a=>{a.advertising_mapping={},a.advertising_query_string="",a.adition_advertising_query_string="",a.show_display_ads=!1,a.show_instream_ads=!1,a.youth_protection=void 0,a.age_classification=void 0,a.disable_display_ads_orf_platforms=!0,a.disable_instream_ads_orf_platforms=!0},x=(a,e=2)=>("0"+a).slice(-e),W=a=>{let e=a.target.nextElementSibling;if(e.select(),navigator.clipboard){let t=e.innerHTML;return navigator.clipboard.writeText(t).then(()=>console.log("successful"),s=>console.log("error",s))}return document.execCommand("copy")},X=a=>{if(!navigator.share)return!1;const e=a.target,t=e.dataset.shareTitle,s=e.dataset.shareUrl;navigator.share({title:t,url:s}).then(()=>console.log("successful share")).catch(n=>console.log("error sharing:",n))},O=a=>{let e;return typeof a.clientX!="undefined"?e=a:e=a.touches[0]||a.changedTouches[0],{x:e.clientX,y:e.clientY}};class j{constructor(e){c(this,"renderSearchResults",e=>{if(this.contentDiv.innerHTML="",!e.length)return null;const t="div",s=new DocumentFragment;for(let n=e.length-1;n>=0;n--){const i=e[n],u=o(t,{class:"l3-2727-result"}),m=o(t,{class:"l3-2727-bar"}),h=o(t,{class:"l3-2727-title"});h.innerHTML=i.title;const L=o("textarea",{class:"l3-2727-ta",disabled:"true"},{position:"absolute",left:"-999em",opacity:0}),v=o(t,{class:"l3-2727-imgWrap",title:M.btn}),p=o(t,{class:"l3-2727-copy"},{display:"none"});p.innerHTML="copied";const B=o("img",{src:i.img,width:"150"},{flex:"auto"});B.dataset.drm=i.drm===null?!1:i.drm;let C="";if(!i.drm){const G=i.date.getFullYear(),$=x(+i.date.getMonth()+1),J=x(i.date.getDate()),R=x(i.date.getHours()),q=x(i.date.getMinutes()),K=`${G}-${$}-${J}`,ee=`${R}${q}`;let P=i.title.toLowerCase().replaceAll('"',"");P.replaceAll("'","");const te=`${K}_${ee}_${P}.mp4`;C=`yt-dlp ${i.link} -o '${te}'`;const U=o("div",{class:"l3-2727-actions"}),N=o("button",{class:"l3-2727-action l3-2727-shareBtn"});N.dataset.share=!0,N.dataset.shareUrl=i.link,N.title=M.shareVideo;const S=o("a",{class:"l3-2727-action l3-2727-newTab"});S.target="_blank",S.href=i.link,S.title=M.openTab,U.append(S,N),m.append(U)}L.innerHTML=C,v.append(B,L,p);const Y=o("div",{class:"l3-2727-main"});Y.append(v,m),u.append(h,Y),s.append(u)}this.contentDiv.append(s)});c(this,"contentClicked",e=>{const t=e.target;if(this.currentActive&&(this.currentActive.classList.remove("active"),this.currentActive.querySelector(".l3-2727-copy").style.display="none"),t.nodeName.toLocaleLowerCase()==="img"&&t.dataset.drm&&t.dataset.drm==="false"){if(W(e)){const n=t.parentElement,i=n.querySelector(".l3-2727-copy");clearTimeout(f),i.style.display="block",f=setTimeout(()=>{n.classList.add("active"),n.classList.add("success"),f=setTimeout(()=>{n.classList.remove("success"),f=setTimeout(()=>{i.style.display="none"},200)},500)},1),this.currentActive=n}}else t.nodeName.toLocaleLowerCase()==="button"&&typeof t.dataset.share!="undefined"&&X(e)});c(this,"dragStart",e=>{this.moved=!1,document.body.classList.add("dragging"),e.stopPropagation(),e.type==="touchstart"?(this.closeBtn.removeEventListener("mousedown",this.dragStart),window.addEventListener("touchmove",this.drag,y),window.addEventListener("touchend",this.dragEnd,!1)):e.type==="mousedown"&&(this.closeBtn.removeEventListener("touchstart",this.dragStart),window.addEventListener("mousemove",this.drag,!1),window.addEventListener("mouseup",this.dragEnd,!1))});c(this,"drag",e=>{e.preventDefault();let t=O(e);this.moved=!0,this.setPos(t)});c(this,"dragEnd",e=>{e.type==="touchend"?(window.removeEventListener("touchmove",this.drag,y),window.removeEventListener("touchend",this.dragEnd)):e.type==="mouseup"&&(window.removeEventListener("mousemove",this.drag,!1),window.removeEventListener("mouseup",this.dragEnd,!1));let{x:t,y:s}=O(e);this.store.set(this.name,{posX:t,posY:s}),document.body.classList.remove("dragging")});c(this,"open",()=>{this.mainDiv.style.display="block",f=setTimeout(()=>{this.mainDiv.classList.add("open"),this.closeBtn.classList.add("open"),this.searchField&&this.searchField.focus(),this.isOpen=!0,this.store.set(this.name,{open:this.isOpen}),clearTimeout(f)},1)});c(this,"close",()=>{this.mainDiv.classList.remove("open"),this.closeBtn.classList.remove("open"),f=setTimeout(()=>{this.mainDiv.style.display="none",this.isOpen=!1,this.store.set(this.name,{open:this.isOpen}),clearTimeout(f)},100)});c(this,"toggle",()=>{if(this.moved)return!1;this.isOpen?this.close():this.open()});c(this,"orfOnFetchData",()=>D(this,null,function*(){let e=0,t;return new Promise((s,n)=>{const i=()=>{window.__NUXT__||n(),e++;const u=window.__NUXT__.data,m=Object.entries(u);let h=[];if(m.forEach(L=>{const[v,p]=L;if(p.sources){h.push(p),E(p),this.currentKey=v;return}}),h.length){const L=h.filter(v=>document.location.pathname.match(v.id));return e=0,s(L[0])}else{if(e>20)return clearTimeout(t),t=null,n();t=setTimeout(()=>i(),150)}};i()})}));c(this,"clear",()=>{this.searchField.value="",this.searchField.dispatchEvent(new Event("input")),this.searchField.focus()});c(this,"onInput",e=>{const t=e.currentTarget.value;this.searchNow(t),this.toggleClearBtn(t==="")});c(this,"createDataObject",()=>D(this,null,function*(){let e;try{return e=yield this.orfOnFetchData(),e&&(e=this.createOrfOn(e)),e}catch(t){return console.log(t),!1}}));c(this,"showAll",e=>{if(e&&this.activeTab===1)return!1;this.showAllButton.classList.add("active"),this.showSegmentsButton.classList.remove("active");const t=this.findData("*");this.filterElement.classList.add("hidden"),this.renderSearchResults(t),this.setActiveTab(1)});c(this,"showSegments",e=>{if(e&&this.activeTab===2)return!1;this.showAllButton.classList.remove("active"),this.showSegmentsButton.classList.add("active"),this.filterElement.classList.remove("hidden");let t=this.oldSearchString||this.searchField.value;this.toggleClearBtn(!t),this.searchField.focus(),this.oldSearchString=null,this.searchNow(t),this.setActiveTab(2)});c(this,"resize",()=>{this.windowWidth=window.innerWidth,this.windowHeight=window.innerHeight});c(this,"reInit",()=>{this.currentKey=null,this.autoSearch=this.oldSearchString,this.oldSearchString=null,this.contentDiv.innerHTML="",this.start()});c(this,"start",()=>D(this,null,function*(){if(this.dataObject=yield this.createDataObject(),!this.dataObject||!this.dataObject.length){this.header.classList.add("hidden"),this.contentDiv.innerHTML=`<div class="l3-2727-result" style="text-align:center;">${M.nothingFound}</div>`;return}if(this.dataObject&&this.dataObject.length===2){this.header.classList.add("hidden");const t=this.dataObject.filter(n=>n.type==="single");this.renderSearchResults(t);const s=document.querySelector(".content .buttons");if(s){const n=o("button",{class:"button s-48 tertiary"});n.addEventListener("click",i=>{i.preventDefault(),window.open(t[0].link,"_blank")}),setTimeout(()=>{n.innerHTML="Abspielen",s.append(n)},200)}return}this.header.classList.remove("hidden"),this.searchField.value=this.autoSearch,this.activeTab===1?this.showAll():this.showSegments()}));this.settings=Object.assign({},j.defaults,e),this.name="dl-app",this.autoSearch="",this.oldSearchString=null,this.dataObject=[],this.currentSite=window.location.href,this.createWatcher(),this.settings.createGui&&this.createApp(),this.store=new w,this.init()}createWatcher(){const e=document.querySelector('[property="og:url"]'),t={attributes:!0},s=i=>{for(const u of i)u.type==="attributes"&&window.location.href!==this.currentSite&&(this.reInit(),this.currentSite=window.location.href)};return new MutationObserver(s).observe(e,t),!0}setPos({x:e,y:t}){e-=19,t-=19,e=l(e,0,this.windowWidth-38),t=l(t,0,this.windowHeight-38),this.closeBtn.style.left=e+"px",this.closeBtn.style.top=t+"px",this.x=e,this.y=t}findData(e){if(!this.dataObject)return null;const t=e==="*"?"all":"single";return this.dataObject.filter(n=>n.type===t&&(e==="*"||n.title.toLowerCase().match(e.replaceAll("*",".*").toLowerCase())))}searchNow(e){if(this.oldSearchString===e)return;const t=this.findData(e);this.renderSearchResults(t),this.store.set(this.name,{search:e}),this.oldSearchString=e}toggleClearBtn(e){if(e){this.clearBtn.style.display="none",this.clearBtnVisible=!1;return}this.clearBtnVisible||(this.clearBtn.style.display="flex",this.clearBtnVisible=!0)}createOrfOn(e){window.playerObject=e;const t=[],s=(i,u="single")=>{E(i);let m=null,h=i.date||i.episode_date;if(h=new Date(h),i.sources[V].forEach(p=>{p.quality_key.toLocaleLowerCase()==="qxa"&&(m=p.src.replace("QXA",F))}),!m)return!1;const L=typeof i.is_drm_protected!="undefined"?i.is_drm_protected:null;return{type:u,title:i.headline||i.title,drm:L,date:h,link:m,img:i.image&&i.image.image&&i.image.image.player&&i.image.image.player.url||null}},n=s(e,"all");return n&&t.push(n),e.segments&&e.segments.forEach(i=>{const u=s(i);u&&t.push(u)}),t}createApp(){const e="div",t=o(e,{id:"l3-2727"}),s=o(e,{id:"l3-2727-body"});this.mainDiv=o(e,{id:"l3-2727-box"},{display:"none"}),this.header=o(e,{id:"l3-2727-header"}),this.showAllButton=o(e,{class:"l3-2727-button"}),this.showAllButton.innerHTML=M.completeBroadcast,this.showSegmentsButton=o(e,{class:"l3-2727-button"}),this.showSegmentsButton.innerHTML=M.individualPosts,this.buttons=o(e,{class:"l3-2727-buttons"}),this.buttons.append(this.showAllButton,this.showSegmentsButton),this.header.append(this.buttons),this.filterElement=o(e,{id:"l3-2727-filter"}),this.searchField=o("input",{type:"text",id:"l3-2727-field",name:"fake_user[name]",value:"",autocomplete:"new-password",spellcheck:"false","aria-autocomplete":"none",placeholder:M.filterVideos}),this.clearBtn=document.createElement(e),this.clearBtn.id="l3-2727-clear",this.clearBtn.innerHTML="X",this.toggleClearBtn(!0),this.filterElement.append(this.searchField,this.clearBtn),this.header.append(this.filterElement),this.clearBtn.addEventListener("click",this.clear,!1),this.searchField.addEventListener("input",this.onInput,!1),this.mainDiv.append(this.header),this.closeBtn=o(e,{id:"l3-2727-close"}),this.closeBtn.addEventListener("click",this.toggle),this.closeBtn.addEventListener("mousedown",this.dragStart),this.closeBtn.addEventListener("touchstart",this.dragStart,y),this.contentDiv=o(e,{id:"l3-2727-content"});const n=o(e,{id:"l3-2727-footer"});n.innerHTML=`v-${Z}`,s.append(this.contentDiv),this.mainDiv.append(s,n),t.append(this.mainDiv,this.closeBtn);const i=o("style");i.innerHTML=Q,document.body.append(i),document.body.append(t),t.addEventListener("click",this.contentClicked),this.showAllButton.addEventListener("click",this.showAll),this.showSegmentsButton.addEventListener("click",this.showSegments),this.app=t}setActiveTab(e){this.store.set(this.name,{activeTab:e}),this.activeTab=e}init(){if(this.appInitialized)return!1;this.appInitialized=!0;let e=this.store.get(this.name);this.activeTab=1,e&&(typeof e.search!="undefined"&&(this.autoSearch=e.search),typeof e.open!="undefined"&&(this.isOpen=e.open),typeof e.posX!="undefined"&&typeof e.posY!="undefined"&&this.setPos({x:e.posX,y:e.posY}),typeof e.activeTab!="undefined"&&(this.activeTab=+e.activeTab)),this.start(),this.isOpen&&(this.mainDiv.classList.add("open"),this.mainDiv.style.display="block",this.closeBtn.classList.add("open"))}}j.defaults={createGui:!0};const I=()=>{if(window.mediathekPlus_initialized)return!1;window.mediathekPlus_initialized=!0,new j};window.top===window.self&&(document.readyState==="complete"||document.readyState==="interactive"?(I(),document.removeEventListener("DOMContentLoaded",I)):document.addEventListener("DOMContentLoaded",I,!1))})();
